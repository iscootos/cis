#二进制文件的输入、输出
文本操作除了文本模式外，还有一个二进制模式。在这个模式下，不转换数据，也不需用格式字符串控制输入输出，所以它比文本模式简单。二进制模式将内存的数据直接传送到文件中。文本模式下具有特殊意义的字符，如`\n`和`\0`，在二进制模式下就没有意义了。     
二进制模式的优点是没有数据转换，也没有精度的损失。而文本模式因为有格式化过程，有数据转换和精度损失。另外，二进制模式比文本模式的速度快。如下两种模式的比较:
```text
要写入文件的一个字节：           char ch = 0x7d;
二进制模式，写入一个二进制字节   0x7d
文本模式，转换符为%3d            [0x31][0x32][0x37]  写入的3个ASCII字符，所以写入了3个字符
```
#####以二进制模式打开文件
要指定二进制模式，只需要在基本打开模式说明符后附加b。因此，打开模式说明符`wb`表示写入二进制文件，`rb`表示读取二进制文件，`ab`表示将数据追加到二进制文件的末尾。二进制文件操作的完整模式字符串列表如下表
```text
模式           说明
"rb"           打开二进制文件，读取它
"rb+"或"r+b"   打开二进制文件，读写它
"wb"           打开或创建二进制文件，写入它。如果文件已存在，就把其长度截短为0，覆盖其内容
"wbx"          创建并打开二进制文件，用非共享访问权限来写入它。
"wb+"或"w+b"   把已有二进制文件的长度截短为0，打开它，进行更新。如果文件不存在，就创建并打开它，进行更新。
"wb+x"或"w+bx" 创建二进制文件，用非共享访问权限来更新它
"ab"           打开或创建二进制文件，给它追加内容。所有内容都写入文件的末尾
"ab+"或"a+b"   创建并打开二进制文件，进行更新。所有内容都写入文件的末尾
```
#####写入二进制文件
写入二进制文件的函数是fwrite()，原型如下
```c
#include <stdio.h>

size_t fwrite(const void * restrict pdata, size_t size, size_t nitems, FILE * restrict pfile);
```
第一个参数是要写入的数组的地址。参数类型是void*，表示任何类型的数组都可以传递为该函数的参数。        
第二个参数是数组元素的字节数。      
第三个参数是数组元素的个数       
最后一个参数是文件流的指针。         
函数fwrite()将实际写入的数据项个数返回为一个整数。如果出现写入错误，禁止写入所有的数据，这个整数就小于nitems。如果size或nitems是0，就不给文件写入任何数据。        

fwrite()函数标准指定数目的二进制数据项写入文件，其中每个数据项有给定的字节数，这会把data数组的所有元素写入文件。注意，在调用函数fwrite()时，没有检查是否在二进制模式下打开文件。写入操作会把二进制数据写入以文本模式打开的文件。当然，也可以把文本数据写入二进制文件。这会使结果很难理解。        
函数fwrite()可以将许多给定长度的二进制对象写入文件。写入自己的结构就像写入int值、double值或一串字节一样简单。但这并不表示，在输出操作中写入的值必须是相同的类型。例如，可以使用malloc()分配一些内存，将不同类型及长度的一串数据项集合起来，再将整块内存一次性写出为一串字节。当然，读取它们时，必须知道文件中值的顺序及类型，才能使它们有意义。       

