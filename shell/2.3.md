#正则表达式
正如你所看到的，grep命令的基本用法非常容易掌握。现在是时候介绍正则表达式的基础知识了，它允许你实现更复杂的匹配。正如我们在本章前面提到的那样，正则表达式被广泛应用于Linux和许多其他开源编程语言中。你可以在vi编辑器或Perl脚本中使用它们，而且不论它们出现在哪里，其基本原理都是一样的。 	

在正则表达式的使用过程中，一些字符是以特定方式处理的。最常使用的特殊字符如表2-17所示。

```text
字符 	含义
^ 		指向一行的开头
$ 		指向一行的结尾
. 		任意单个字符
[] 		方括号内包含一个字符范围，其中任何一个字符都可以被匹配，例如字符范围a～e，或在字符范围前面加上^符号表示使用反向字符范围，即不匹配指定范围内的字符
```
如果想将上述字符用作普通字符，就需要在它们前面加上`\`字符。例如，如果想使用`$`字符，你需要将它写为`\$`。 		

在方括号中还可以使用一些有用的特殊匹配模式

```text
匹配模式 		含义
[:alnum:] 		字母与数字字符
[:alpha:] 		字母
[:ascii:] 		ASCII字符
[:blank:] 		空格或制表符
[:cntrl:] 		ASCII控制字符
[:digit:] 		数字
[:graph:] 		非控制、非空格字符
[:lower:] 		小写字母
[:print:] 		可打印字符
[:punct:] 		标点符号字符
[:space:] 		空白字符，包括垂直制表符
[:upper:] 		大写字母
[:xdigit:] 		十六进制数字
```
另外，如果指定了用于扩展匹配的-E选项，那些用于控制匹配完成的其他字符可能会遵循正则表达式的规则。对于`grep`命令来说，我们还需要在这些字符之前加上\字符。

```text
选项 		含义
? 			匹配是可选的，但最多匹配一次
* 			必须匹配0次或多次
+ 			必须匹配1次或多次
{n} 		必须匹配n次
{n,} 		必须匹配n次或n次以上
{n,m} 		匹配次数在n到m之间，包括n和m
```
这看上去有点复杂，但如果你实际应用它，将会发现它并不像第一眼看上去那么复杂。掌握正则表达式的最简单方法就是尝试一些实验。

我们的第一个例子是查找以字母e结尾的行。你可能会猜到需要使用特殊字符$，如下所示：

```bash
grep e$ words2.txt 
```
```text
Art thou not,fatal vision,sensible
I see thee yet,in form as palpable
Nature seems dead,and wicked dreams abuse
```
如你所见，这个命令找到了以字母e结尾的行。

现在假设想要查找以字母a结尾的单词。要完成这一任务，你需要使用方括号括起的特殊匹配字符。在本例中，你将使用的是[[:blank:]]，它用来测试空格或制表符：

```bash
grep a[[:blank:]] words2.txt
```
```text
Is this a dagger which I see before me,
A dagger of the mind,a false creation,
moves like a ghost,thou sure and firm-set earth,
```
我们在这里只涉及了正则表达式中最重要的内容。与Linux中大多数事物一样，系统中的大量文档可以帮助你了解更多的细节，但学习正则表达式最好的方法是实际操作。

